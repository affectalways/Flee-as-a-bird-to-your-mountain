# 02.Windows安装MongoDB

**一、先登录Mongodb官网**[**https://www.mongodb.com/download-center#community**](https://www.mongodb.com/download-center#community) **下载  安装包。32、64位的都行。**

 ![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/021.png)



**二、安装MongoDB**

下载后的安装包：

![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/022.png)

安装比较简单，类似于普通QQ软件，中间主要是选择“Custom”自定义 安装路径修改下：D:\software\MongoDB

然后不断“下一步”，安装至结束。

安装比较容易。难点在启动Mongodb的服务以及将MongoDB设置成Windows服务，加配置文件在windows的“服务”中找到。

 

**三、先创建数据库文件的存放位置**

在MongoDB下创建data，在data下再创建db：D:\AffectAlways_Code\MongoDB\data\db

因为启动mongodb服务之前需要必须创建数据库文件的存放文件夹，否则命令不会自动创建，而且不能启动成功。



**四、启动MongoDB服务**

**1.打开cmd命令行**

**2.进入D:\AffectAlways_Code\MongoDB\bin目录（注意：先输入d:进入d盘，然后输入cd D:\AffectAlways_Code\MongoDB\bin）**

**3.输入如下的命令启动mongodb服务： .\mongod.exe --dbpath D:\AffectAlways_Code\MongoDB\data\db**

![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/023.png)

即是在第三步创建的数据库存放文件路径下启动。

**4.在浏览器输入http://localhost:27017 （27017是mongodb的端口号）查看，若显示：**

  ![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/024.png)

则表示，连接成功。如果不成功，可以查看端口是否被占用。

但是在本地windows“服务”中，是没有配置上mongodb 服务的，可以打开“服务”看下

![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/025.png)

但是以上每次开启mongoDb都需要键入**mongod --dbpath D:\software\MongoDB\data\db这个命令，太麻烦了。**



**五、配置本地windows mongodb 服务**

这样可设置为 开机自启动，可直接手动启动关闭，可通过命令行net start MongoDB 启动。该配置会大大方便。

**1.先在data文件下创建一个新文件夹log（用来存放日志文件）**

  ![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/026.png)

**2. 在MongoDB目录下创建配置文件mongo.conf，文件内容如下：**

**[plain]** [**view plain**](http://blog.csdn.net/mzbonnt/article/details/51461331#) [**copy**](http://blog.csdn.net/mzbonnt/article/details/51461331#)

1. **dbpath=D:\Program Files\MongoDB\Server\3.2\data\db #数据库路径** 
2. **logpath=D:\Program Files\MongoDB\Server\3.2\logs\mongo.log #日志输出文件路径** 
3. **logappend=true #错误日志采用追加模式** 
4. **journal=true #启用日志文件，默认启用** 
5. **quiet=true #这个选项可以过滤掉一些无用的日志信息，若需要调试使用请设置为false** 
6. **port=27017 #端口号 默认为27017** 

**3.用管理员身份打开cmd:****（一定要以管理员身份，而不是什么powershell）**

可能还有很多人不会管理员身份打开cmd。这也介绍下：

在下图路径下找到cmd 的运行文件

  ![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/027.png)

然后右键，以管理员身份运行。打开后发现在顶端比普通打开的多了”管理员“三个字

![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/028.png)

**4.配置windows服务：**

cmd先跳转到 D:\AffectAlways_Code\MongoDB\bin目录下。

输入：mongod.exe --config D:\AffectAlways_Code\MongoDB\mongo.conf --install -serviceName "MongoDB"

即根据刚创建的mongo.config配置文件安装服务，名称为MongoDB。

   ![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/029.png)

完成后，再次查看本地的服务。

   ![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/0210.png)

如果成功的话，会发现本地服务多了”MongoDB"服务。

这就大功告成了。哈哈~~~

可以通过：“开机自启动，可直接手动启动关闭，命令行net start MongoDB 启动”。

开启后，可以正常连接了。可以用pycharm等IDE连接，

 ![](https://raw.githubusercontent.com/affectalways/Flee-as-a-bird-to-your-mountain/main/img/0212.png)

如果需要卸载MongoDB服务，首先进入D:\Program Files\MongoDB\Server\3.2\bin（依安装目录而定）目录下，执行如下命令：

```
mongod.exe --remove --serviceName "MongoDB" 
```

至此，所有操作已完成，服务已成功安装。



执行后可以创建服务，但无法启动MongoDB服务，每次启动都会提示1053错误，根据搜索的解决办法尝试如下命令还是未能解决

```
mongod.exe --bind_ip 127.0.0.1 --logpath "D:\Program Files\MongoDB\Server\3.2\logs\mongo.log" --logappend --dbpath "D:\Program Files\MongoDB\Server\3.2\data" --directoryperdb --serviceName MongoDB --install 
```

