# 6.分割回文串

##### 目录

- [leetcode题](#leetcode题)



### leetcode题

#### [131. 分割回文串](https://leetcode.cn/problems/palindrome-partitioning/)

难度中等1222

给你一个字符串 `s`，请你将 `s` 分割成一些子串，使每个子串都是 **回文串** 。返回 `s` 所有可能的分割方案。

**回文串** 是正着读和反着读都一样的字符串。

 

**示例 1：**

```
输入：s = "aab"
输出：[["a","a","b"],["aa","b"]]
```

**示例 2：**

```
输入：s = "a"
输出：[["a"]]
```

 

**提示：**

- `1 <= s.length <= 16`
- `s` 仅由小写英文字母组成





## 思路

本题这涉及到两个关键问题：

1. 切割问题，有不同的切割方式
2. 判断回文

这种题目，想用for循环暴力解法，可能都不那么容易写出来，所以要换一种暴力的方式，就是回溯。

我们来分析一下切割，**其实切割问题类似组合问题**。

所以切割问题，也可以抽象为一棵树形结构，如图：

![https://pic.leetcode-cn.com/298a80282ac3505fec3710abdc1e656c591cf7acaa3ba976151480729244b649-image.png](https://pic.leetcode-cn.com/298a80282ac3505fec3710abdc1e656c591cf7acaa3ba976151480729244b649-image.png)

伪代码：

- 每一个结点表示剩余没有扫描到的字符串，产生分支是截取了剩余字符串的前缀；

- 产生前缀字符串的时候，判断前缀字符串是否是回文。
  - 如果前缀字符串是回文，则可以产生分支和结点；
  
  - 如果前缀字符串不是回文，则不产生分支和结点，这一步是剪枝操作。

- 在叶子结点是空字符串的时候结算，此时 从根结点到叶子结点的路径，就是结果集里的一个结果，使用深度优先遍历，记录下所有可能的结果。
-  使用一个路径变量 path 搜索，path 全局使用一个（注意结算的时候，要生成一个拷贝），因此在递归执行方法结束以后需要回溯，即将递归之前添加进来的元素拿出去；
-  path 的操作只在列表的末端，因此合适的数据结构是栈。



```python
class Solution:
    def partition(self, s: str):
        ans = []
        length = len(s)
        if not length:
            return ans
        
        def is_palindrome(t):
            # 判断是不是回文，如果是返回True，不是返回False
            start, end = 0, len(t) - 1
            while start < end:
                if t[start] != t[end]:
                    return False

                start += 1
                end -= 1

            return True

        def back(path, start):
            if start == length:
                # 已经将字符串全部截断，保存
                ans.append(path[:])
                return

            for i in range(start, length):
                # 判定当前字符串截断是不是回文串，如果是回文串，继续；若不是，跳过
                if not is_palindrome(s[start: i + 1]):
                    continue

                # 将截断的字符串添加入库
                path.append(s[start: i + 1])
                back(path, i + 1)
                path.pop()

        # 起始截断下标为0
        back([], 0)

        return ans
```

