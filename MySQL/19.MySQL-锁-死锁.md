# 19.MySQL-锁-死锁

**是什么**

- [是什么](#是什么)





## 是什么

​		死锁是并发系统中常见的问题，同样也会出现在数据库MySQL的并发读写请求场景中。当两个及以上的事务，双方都在等待对方释放已经持有的锁或因为加锁顺序不一致造成循环等待锁资源，就会出现“死锁”。常见的报错信息为 `Deadlock found when trying to get lock...`。

​		举例来说 A 事务持有 X1 锁 ，申请 X2 锁，B事务持有 X2 锁，申请 X1 锁。A 和 B 事务持有锁并且申请对方持有的锁进入循环等待，就造成了死锁。

![img](https://github.com/affectalways/Flee-as-a-bird-to-your-mountain/blob/main/MySQL/pictures/14.%E6%AD%BB%E9%94%81.jpg?raw=true)

如上图，是右侧的四辆汽车资源请求产生了回路现象，即死循环，导致了死锁。



从死锁的定义来看，MySQL 出现死锁的几个要素为：

1. 两个或者两个以上事务
2. 每个事务都已经持有锁并且申请新的锁
3. 锁资源同时只能被同一个事务持有或者不兼容
4. 事务之间因为持有锁和申请锁导致彼此循环等待





## 参考链接

- https://z.itpub.net/article/detail/7B944ED17C0084CF672A47D6E938B750#:~:text=%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%BB%E9%94%81,to%20get%20lock...%20%E3%80%82